# Документация разработчика

## Текст программы

### Наименование программы

**PKG_LAB2** — приложение для чтения и отображения информации из графических файлов, написанное на языке C++ с использованием библиотеки Qt.

### Область применения

Программа предназначена для работы с различными форматами растровых изображений, извлечения и отображения ключевой информации об изображении. Она может быть использована для анализа графических файлов и обработки больших папок с изображениями.

### Назначение программы

- Реализация и визуализация следующих возможностей:
  - Чтение изображений из графических файлов (jpg, gif, tif, bmp, png, pcx).
  - Получение и отображение информации об изображении:
    - Имя файла.
    - Размер изображения (в пикселях).
    - Разрешение (dots/inch).
    - Глубина цвета.
    - Тип сжатия (для форматов, где это применимо).
  - Возможность указания папки, содержащей до 100000 файлов.
  - Отображение результатов в виде таблицы.
  - Обработка дополнительных характеристик изображений (например, матрицы квантования JPEG, количество цветов в палитре GIF и т.д.) с пояснением.
- Обеспечение быстродействия при обработке больших объемов данных.

### Функциональные возможности

- Поддержка форматов: **jpg**, **gif**, **tif**, **bmp**, **png**, **pcx**.
- Вывод основной информации об изображениях в удобной таблице.
- Возможность указать папку для массового анализа файлов.
- Обработка до **100000 файлов** в одной папке.
- Поддержка дополнительных характеристик (например, матрицы квантования, палитры цветов) для форматов, где это возможно.
- Удобный и дружелюбный интерфейс для работы с изображениями.
- Высокая производительность при обработке файлов.

## Описание программы

### Структура программы

- **PKG_LAB2**: основной класс приложения, наследующийся от `QMainWindow`.
  - **Методы инициализации**:
    - `setupUI`: настройка всех элементов интерфейса приложения.
    - `setupConnections`: подключение сигналов и слотов для обработки пользовательских действий.
  - **Функционал для работы с изображениями**:
    - `readImageInfo`: извлечение информации об изображении (имя файла, размер, разрешение, глубина цвета, сжатие).
    - `processFolder`: обработка всех файлов в указанной папке.
    - `validateFileFormat`: проверка поддерживаемого формата файла.
  - **Дополнительные функции**:
    - `extractJpegQuantizationMatrix`: извлечение матрицы квантования для JPEG.
    - `extractGifPaletteInfo`: получение информации о палитре для GIF.
  - **Интерфейсные элементы**:
    - Кнопка выбора файла или папки.
    - Таблица для отображения информации об изображениях.
    - Прогресс-бар для отображения статуса обработки папки.

### Используемые библиотеки и модули

- **Qt**: для создания графического интерфейса и обработки событий.
- **libjpeg**: для работы с JPEG-файлами (извлечение информации о сжатии и матрице квантования).
- **libpng**: для чтения PNG-файлов.
- **libtiff**: для обработки TIFF-файлов.
- **zlib**: для работы с сжатыми данными.
- **QImageReader**: встроенный инструмент Qt для извлечения базовой информации об изображениях.

### Логические структуры данных

- **Классы и переменные**:
  - `ImageInfo`: структура для хранения данных об изображении (имя файла, размер, разрешение, глубина цвета, сжатие).
  - `imageList`: список объектов `ImageInfo` для отображения в таблице.
  - `supportedFormats`: массив поддерживаемых форматов файлов.
- **Виджеты интерфейса**:
  - Кнопка выбора папки (`QPushButton`).
  - Таблица для отображения данных (`QTableWidget`).
  - Прогресс-бар (`QProgressBar`) для индикации обработки файлов.

### Взаимодействие с пользователем

1. Пользователь выбирает папку с графическими файлами.
2. Программа сканирует все файлы в указанной папке, проверяя их форматы.
3. Для каждого файла программа извлекает информацию:
   - Имя файла.
   - Размер (в пикселях).
   - Разрешение (dots/inch).
   - Глубину цвета.
   - Тип сжатия (если применимо).
4. Информация отображается в таблице.
5. Если файл содержит дополнительные данные (например, матрицу квантования JPEG), они выводятся с пояснением.
6. Прогресс-бар отображает ход обработки файлов.

## Инструкция по установке и запуску

### Требования к системе

- **Qt Framework** версии 5.15 и выше.
- Операционная система Windows, macOS или Linux.
- **C++ компилятор**: GCC, Clang или MSVC с поддержкой C++17.
- Библиотеки: **libjpeg**, **libpng**, **libtiff**, **zlib**.

### Установка

1. **Убедитесь, что установлен Qt и необходимые библиотеки**:

   Установите Qt Framework с официального сайта: [https://www.qt.io/download](https://www.qt.io/download).

   Для установки внешних библиотек используйте менеджер пакетов вашей системы:
   - **Ubuntu/Debian**:
     ```bash
     sudo apt-get install libjpeg-dev libpng-dev libtiff-dev zlib1g-dev
     ```
   - **Windows**: скачайте и установите библиотеки через vcpkg или вручную.

2. **Склонируйте репозиторий**:

   ```bash
   git clone https://github.com/your-repository/PKG_LAB2.git
   ```

3. **Соберите проект**:

   Откройте проект в Qt Creator и выполните сборку, либо используйте командную строку:

   ```bash
   cd PKG_LAB2
   qmake
   make
   ```

### Запуск программы

1. Выполните скомпилированный файл:

   ```bash
   ./PKG_LAB2
   ```

2. Для Windows используйте исполняемый файл `.exe`.

## Инструкция пользователя

1. Нажмите кнопку "Выбрать папку" для указания директории с графическими файлами.
2. Дождитесь завершения обработки папки (прогресс-бар отображает ход выполнения).
3. Ознакомьтесь с результатами в таблице:
   - Имя файла.
   - Размер изображения.
   - Разрешение.
   - Глубина цвета.
   - Тип сжатия.
4. При необходимости воспользуйтесь кнопкой для экспорта данных в файл.
5. Если файл содержит дополнительные данные (например, матрицу квантования JPEG), они выводятся в отдельной вкладке с пояснениями.

## Требования к техническим характеристикам

- **Процессор**: с тактовой частотой не менее 1 ГГц.
- **Оперативная память**: не менее 1 ГБ.
- **Дисплей**: с разрешением не менее 1024x768 пикселей.
- **Свободное место на диске**: около 2 ГБ для обработки больших папок.

## Обработка ошибок

- При попытке открыть неподдерживаемый файл выводится предупреждение.
- Если файл поврежден или не может быть прочитан, программа пропускает его и продолжает выполнение.
- В консоли отображаются сообщения об ошибках для отладки.

## Дополнительные сведения

### Поддерживаемые форматы

- **JPEG**: извлечение матрицы квантования, типа сжатия.
- **GIF**: извлечение информации о палитре.
- **PNG**: поддержка сжатия без потерь.
- **BMP**: базовая информация без сжатия.
- **TIFF**: поддержка многослойных изображений.
- **PCX**: извлечение размеров и глубины цвета.

### Быстродействие

- Для обработки больших папок используется многопоточность (через `QThread`).
- Хранение данных в памяти оптимизировано для минимизации затрат.

## Сопровождение и развитие

- Код программы хорошо структурирован и снабжен комментариями.
- Для добавления новых форматов файлов можно расширять методы `readImageInfo` и `validateFileFormat`.

## Ссылки на используемые стандарты

- **ГОСТ 19.101-77** — Виды программ и программных документов.
- **ГОСТ 19.402-78** — Описание программы.
- **ГОСТ 19.505-79** — Руководство оператора.

## Заключение

Программа **PKG_LAB2** предоставляет удобный инструмент для анализа графических файлов и извлечения информации об изображениях. Она демонстрирует высокое быстродействие, удобный интерфейс и поддерживает работу с популярными форматами.
